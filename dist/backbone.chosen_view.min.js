this.JST=this.JST||{},this.JST.chosen=function(a){var b=[],c=a||{},d=c.name,e=c.placeholder,f=c.multiple,g=c.disabled,h=c.span,i=c.groupBy,j=c.collection,k=c._,l=c.selected,m=c.value,n=c.text;if(b.push("<select"+jade.attrs({name:d,"data-placeholder":e,multiple:f,disabled:g,"class":["chzn-select",""+h]},{"class":!0,name:!0,"data-placeholder":!0,multiple:!0,disabled:!0})+">"),f||b.push("<option></option>"),i){var o=j.groupBy(i);!function(){var a=o;if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++){var e=a[c];b.push("<optgroup"+jade.attrs({label:c},{label:!0})+">"),function(){var a=e;if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++){var f=a[c],g=k.contains(l,String(m(f)));b.push("<option"+jade.attrs({value:m(f),selected:g},{value:!0,selected:!0})+">"+jade.escape(null==(jade.interp=n(f))?"":jade.interp)+"</option>")}else{var d=0;for(var c in a){d++;var f=a[c],g=k.contains(l,String(m(f)));b.push("<option"+jade.attrs({value:m(f),selected:g},{value:!0,selected:!0})+">"+jade.escape(null==(jade.interp=n(f))?"":jade.interp)+"</option>")}}}.call(this),b.push("</optgroup>")}else{var d=0;for(var c in a){d++;var e=a[c];b.push("<optgroup"+jade.attrs({label:c},{label:!0})+">"),function(){var a=e;if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++){var f=a[c],g=k.contains(l,String(m(f)));b.push("<option"+jade.attrs({value:m(f),selected:g},{value:!0,selected:!0})+">"+jade.escape(null==(jade.interp=n(f))?"":jade.interp)+"</option>")}else{var d=0;for(var c in a){d++;var f=a[c],g=k.contains(l,String(m(f)));b.push("<option"+jade.attrs({value:m(f),selected:g},{value:!0,selected:!0})+">"+jade.escape(null==(jade.interp=n(f))?"":jade.interp)+"</option>")}}}.call(this),b.push("</optgroup>")}}}.call(this)}else!function(){var a=j.models;if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++){var e=a[c],f=k.contains(l,String(m(e)));b.push("<option"+jade.attrs({value:m(e),selected:f},{value:!0,selected:!0})+">"+jade.escape(null==(jade.interp=n(e))?"":jade.interp)+"</option>")}else{var d=0;for(var c in a){d++;var e=a[c],f=k.contains(l,String(m(e)));b.push("<option"+jade.attrs({value:m(e),selected:f},{value:!0,selected:!0})+">"+jade.escape(null==(jade.interp=n(e))?"":jade.interp)+"</option>")}}}.call(this);return b.push("</select>"),b.join("")},function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};Backbone.ChosenView=function(c){function e(){return this.toggleDropdown=b(this.toggleDropdown,this),this.clearAll=b(this.clearAll,this),this.selectAll=b(this.selectAll,this),this.toggleAll=b(this.toggleAll,this),this.saveSelected=b(this.saveSelected,this),this.render=b(this.render,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.template=JST.chosen,e.prototype.defaults={name:null,placeholder:null,multiple:null,defaultValue:null,span:"span4",value:null,text:null,groupBy:null,disabled:!1,allowDeselect:!0},e.prototype.events={"change select":"saveSelected"},e.prototype.initialize=function(){var a=this;return this.options=_.defaults(this.options,this.defaults),this.valueFn=_.isFunction(this.options.value)?this.options.value:function(b){return b.get(a.options.value)},this.textFn=_.isFunction(this.options.text)?this.options.text:function(b){return b.get(a.options.text)},this.selected=this.options.defaultValue||[],this.listenTo(this.collection,"reset sync",this.render),this.$el.on("toggle-all",this.toggleAll),this.$el.on("select-all",this.selectAll),this.$el.on("clear-all",this.clearAll),this.$el.on("toggle-dropdown",this.toggleDropdown),setTimeout(this.render,0)},e.prototype.render=function(){return this.selected=_.isArray(this.selected)?this.selected:[this.selected],this.$el.html(this.template({collection:this.collection,multiple:this.options.multiple,placeholder:this.options.placeholder,span:this.options.span,name:this.options.name,value:this.valueFn,text:this.textFn,groupBy:this.options.groupBy,selected:_.invoke(this.selected,"toString"),disabled:this.options.disabled,_:_})),this.$("select").chosen({allow_single_deselect:this.options.allowDeselect,lock_dropdown:this.locked}),_.isEmpty(this.selected)||this.$("select").trigger("change",{result:this.selected}),this},e.prototype.saveSelected=function(a,b){return this.selected=this.$("select").val()||(null!=b?b.result:void 0)||[]},e.prototype.toggleAll=function(){return this.isSelectAll===!0?this.clearAll():this.selectAll()},e.prototype.selectAll=function(){return this.isSelectAll=!0,this.selected=this.collection.map(this.valueFn),this.render()},e.prototype.clearAll=function(){return this.isSelectAll=!1,this.selected=[],this.render()},e.prototype.toggleDropdown=function(){return this.isLock=!this.isLock,this.locked=this.isLock?!0:!1,this.render()},e}(Backbone.View)}.call(this);